---
title: "rmaxima - an interface to maxima for R"
output: 
   html_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

Development version of the yet-to-be-released rmaxima CRAN package. rmaxima provides an interface to the powerful and fairly complete maxima computer algebra system

This repository is a fork from the original version created by Kseniia Shumelchyk and Hans W. Borcher [shumelchyk/rmaxima](https://github.com/shumelchyk/rmaxima), which is currently not maintained.

# Installation

## Requirements
- this package currently only works under Linux (and has not been tested under MacOS)
- you can install it without having Maxima installed, but obviously need to install Maxima in order to use it.

## Steps

If you want to install the latest version (currently the only one available) install the R package `drat` first and add this github account as a repo:

```{r, eval = FALSE}
install.packages("drat")
drat::addRepo("rcst")
```

Now you can easily install it the usual way:

```{r eval = FALSE}
install.packages("rmaxima")
```

# Usage

## Introduction

This section demonstrates the use of `rmaxima` via it's knitr engine. Alternatively, you can run each line of the Maxima code chunks via `maxima.get()`.

Let's first attach the package. This will start Maxima automatically and set the output format to LaTeX, which is practical for the purpose of this page, the resulting markdown is rendered via pandoc which takes care of math expressions delimited by `$$`.

```{r}
# library(rmaxima)
```

```{r, echo = FALSE}
knitr::knit_hooks$set(source = function(x, options){
  if (options$engine == "maxima"){
    opts <- gsub(",\\s*verbatim\\s*=\\s*TRUE\\s*", "", options$params.src)
    opts <- gsub(",?\\s*engine\\s*=\"maxima\"", "", opts)
    if(opts=="") bef = sprintf('\n\n    ```{maxima}\n', opts, "\n")
    else bef = sprintf('\n\n    ```{maxima,%s}\n', opts, "\n")
    stringr::str_c(
      bef, 
      knitr:::indent_block(paste(x, collapse = '\n'), "    "), 
      "\n    ```\n"
    )
  } 
  else {
    stringr::str_c("\n\n```", tolower(options$engine), "\n", 
      paste(x, collapse = '\n'), "\n```\n\n"
    )
  }
})
```

Now we can enter Maxima expression inside code chunks. Note that we are not required to end each line by `;` or `$` (suppressing output). If omitted a `;` is inserted automatically. 


```{maxima, maxima.format="latex"}
L: sqrt(1 - 1/R^2);
assume(R > 0);
'integrate(x, x, 0, L) = integrate(x, x, 0, L)
```


In the above code chunk we define a variable `L` (that depends on another variable `R`). We tell Maximas data base to assume `R` being larger than zero and suppress any output resulting from this command. The last line prints an unevaluated integral on the left-hand side of the equal sign and on the right-hand side evaluates that same definit integral. The tick quotation mark tells Maxima not to evaluate the suceeding expression.

```{maxima, results='asis'}
'L = L;
assume(R > 0);
'integrate(x, x, 0, 'L) = integrate(x, x, 0, L)
```

Since this web page you currently reading has been generated by using `pandoc` the LaTeX output format from Maxima is automatically rendered by the included MathJax JavaScript script.

You can also change Maxima's output format by setting chunk option `maxima.format`.

```{maxima, maxima.format="linear"}
sqrt(3/4);
```

```{maxima, maxima.format="mathml"}
f(x) := e^(x^2)/cos(x);
diff(f(x), x);
```

```{maxima, maxima.format="mathml", results='asis'}
%;
```
